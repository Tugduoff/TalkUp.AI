name: PR Notifications

on:
  pull_request:
    types: [opened, review_requested, closed]
  pull_request_review:
    types: [submitted]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Notify PR opened
        if: github.event.action == 'opened'
        uses: ./.github/actions/notify-discord
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "ðŸ“¥ Pull Request Opened"
          color: 3447003
          description: |
            **Author:** `${{ github.actor }}`\n
            **Title:** `${{ github.event.pull_request.title }}`\n
            **Link:** [PR #${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})

      - name: Notify reviewer requested
        if: github.event.action == 'review_requested'
        uses: ./.github/actions/notify-discord
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "ðŸ‘€ Reviewer Requested"
          color: 16776960
          description: |
            **PR:** [#${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})\n
            **Requested Reviewer:** `${{ github.event.requested_reviewer.login }}`\n
            **By:** `${{ github.actor }}`

      - name: Notify PR reviewed
        if: github.event.action == 'submitted'
        uses: ./.github/actions/notify-discord
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "ðŸ’¬ Pull Request Reviewed"
          color: 3066993
          description: |
            **Reviewer:** `${{ github.actor }}`\n
            **PR:** [#${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})\n
            **Title:** `${{ github.event.pull_request.title }}`

      - name: Notify PR merged
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: ./.github/actions/notify-discord
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "âœ… Pull Request Merged"
          color: 15158332
          description: |
            **Author:** `${{ github.actor }}`\n
            **PR:** [#${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})\n
            **Title:** `${{ github.event.pull_request.title }}`
